# LCCUP 2020 Solo Competition

16/25

1:34:44 + 1 error = 1:39:44

0:02:38 / 0:06:38 / 1:28:54 / 1:34:44 / --

Rank #60

说实话能有这样的排名也挺意外的，没想到整场比赛只有 22 位 AK （虽然距离 #50 鼠标垫只有 10 分钟的距离）。不过也可能因为不给错误用例的原因，T5 我就完全不知道自己哪里没想到，T4 的一种特殊情况后来想到了也就有惊无险 AC 了。大概马后炮一下，主要拖时间的地方在于 T3, 先是没想清楚状态转移，然后又在前缀和那里纠结了很多下标加减 1 的问题，到最后通过自己的测试样例然后 AC 花了一个小时的时间。

还是心浮气躁了，而且被 leetcode 带有错误样例（有的时候还有正确答案）的报错惯坏了，以后还要多多修炼。

------

下面是题解

- T1 easy 1pt

    没什么好说的，模拟。

- T2 easy 3pt

    排序+双指针，基本操作。

- T3 middle 5pt

    dp. 重要的是要确定状态和转移。这题本质是确定两个端点 `i, j`, 使得三段分别为红黄红。最暴力的方法是对于每个 `i, j` 判断 cost, 这样的时间复杂度是 $O(n^3)$, 而通过前缀和，我们可以将暴力优化到 $O(n^2)$, 但是看了下数据量，妥妥超时。那么就肯定需要一个 $O(n)$ 的算法。

    重新考虑两个端点，我们不妨先考虑对于右端点的状态转移。在递推时为了方便，我们可以**不考虑右端点右边**全部变红的 cost, 只需要在遍历右端点时加上 cost **维护最小值**即可。那么这里转移的 `dp` 数组就是让右端点及其左边符合 红-黄 的要求的最小花费。对于最左端，只有一个点没有两个颜色，我们可以考虑将 `dp[0]` 定义为让第一个变红的花费。之后的选择本质就是前面的求使其最小的 `i` 对应的情况。有了前缀和数组（此处 `.*[j]` 表示前 `j` 片叶子中对应叶子的数量，实际可能要进行加减 1 的操作，请务必仔细），我们可以把转移方程写成这样的形式： 

    `dp[j] = min_{1 <= i < j}(yellow[i] + red[j] - red[i]) = red[j] + min_{1 <= i < j}(2 * yellow[i] - i)` 

    显而易见，事实上我们并不需要取每一个 `i` 的值，而只需要考虑两种情况（也可以通过画图推出这样的两种选择）：

    1. 从前面的最优情况转移过来，亦即前面的最优解加上把新加入的叶子变成黄色的花费。 `red[j] - red[j-1] + dp[j-1]`

    2. 我们不妨考虑 `"rrrrrrrrr"` 这样的前缀，此时将最近一个以外全视为红色部分，只改变最近一个显然比前面的情况最优。 `red[j] + 2 * yellow[i-1] - (i-1)`

    这样转移方程就完成了，加上右边的 cost 维护最小值即可。

- T4 hard 7pt

    说句实话，可能是因为我做过 WC202 的 T4 的原因，这道题其实和它思路几乎一模一样（然后就贡献了一个 error）。

    自顶向下记忆化搜索，首先确定基本状态一定是 1, 亦即一定需要步行一次。baseline 是不坐公交裸加上去的 cost, 然后对于每一种可能的乘车方式，我们有两个选择（逆向）：第一，加满再除（如果整除就不用考虑）；第二，减去余数再除（注意不能变成0）。然后更新最小值即可。

- T5 hard 9pt

    最后做出来发现，这道题所有用到的技巧都是最基本的 BFS/DFS ，并不需要任何花里胡哨的内容（本质判断环的入度法用了类似拓扑排序的思想）。

    首先看题干， `N` 个点， `N` 条边，那么必有且仅有一个环。首先我们要找到环，就需要入度表（以及邻接表），与此同时可以排除一些 edge case, 比如 3 个点的情况和两人相邻的情况。进而，很容易判断，具有一个大于等于 4 的环是抓不到的必要条件。接下来考虑一般情况是否能追上以及最优解问题（我在这里分类讨论了好久……），其实，判断 B 是否能到达某个点，**只要看它到两人的最短距离满足 $d(A) > d(B) + 1$ 即可**（注意等号时由于 A 是先手，可以视为 A 可以多走一步）。

    有了这个条件，问题就豁然开朗了。抓不到等价于具有一个大于等于 4 的环，以及环上有 B 可以到达的点即可。而最长时间本质就是 B 能到达的相对 A 最远的点对应的距离。怎么算距离，对两人 BFS 即可。


------

有什么想说的？大概也没了，不以物喜不以己悲，继续努力填坑/修炼。Tomorrow is another day.
